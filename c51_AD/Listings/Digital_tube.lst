C51 COMPILER V9.54   DIGITAL_TUBE                                                          04/20/2023 10:56:06 PAGE 1   


C51 COMPILER V9.54, COMPILATION OF MODULE DIGITAL_TUBE
OBJECT MODULE PLACED IN .\Objects\Digital_tube.obj
COMPILER INVOKED BY: D:\MDK\C51\BIN\C51.EXE HandWare\Digital_tube\Digital_tube.c OPTIMIZE(8,SPEED) BROWSE INCDIR(.\HandW
                    -are;.\HandWare\key;.\HandWare\delay;.\HandWare\Digital_tube;.\HandWare\led;.\HandWare\produce_wave) DEBUG OBJECTEXTEND P
                    -RINT(.\Listings\Digital_tube.lst) TABS(2) OBJECT(.\Objects\Digital_tube.obj)

line level    source

   1          #include "reg51.h"
   2          #include <INTRINS.H>
   3          #include "Digital_tube.h"
   4          #include "delay.h"
   5          #include "key.h"
   6          #include "produce_wave.h"
   7          
   8          sbit START = P3^0;
   9          sbit OE = P3^4;
  10          sbit EOC = P3^1;
  11          sbit select1 = P3^5;
  12          sbit select2 = P3^6;
  13          sbit select3 = P3^7;
  14          
  15          uint r;
  16          
  17          //  先弄个整体框架，具体引脚随后再分配
  18          
  19          uchar code discode[]={0xc0,0xf9,0xa4,0xb0,0x99,0x92,0x82,0xf8,0x80,0x90}; //  共阴极数码管，带小数点
  20          uchar b[4],c = 0x10;
  21          static unsigned int addata = 0,i;
  22          
  23          void show(void)
  24          {
  25   1        
  26   1            select1 = 1;
  27   1            select2 = 0;
  28   1            select3 = 0;
  29   1            P0 =b[0];
  30   1            delay_1ms(15);
  31   1            P0 = 0x0;
  32   1          
  33   1          
  34   1            select1 = 0;
  35   1            select2 = 1;
  36   1            select3 = 0;
  37   1            P0 =b[1];
  38   1            delay_1ms(15);
  39   1            P0 = 0x0;
  40   1          
  41   1            select1 = 0;
  42   1            select2 = 0;
  43   1            select3 = 1;
  44   1            P0 =b[2];   
  45   1            delay_1ms(15);
  46   1            P0 = 0x0;     
  47   1        
  48   1      }
  49          
  50          void Start_ADC0808(void)
  51          {
  52   1        START = 0;
  53   1        START = 1;
C51 COMPILER V9.54   DIGITAL_TUBE                                                          04/20/2023 10:56:06 PAGE 2   

  54   1        START = 0;
  55   1      //  while(EOC == 0)
  56   1      //  {
  57   1      //    OE = 1; 
  58   1      //  }
  59   1        while(1)
  60   1        {
  61   2      
  62   2          if(EOC == 1)
  63   2            break;
  64   2          OE = 1;
  65   2          addata = P1;
  66   2        //  addata = addata * 1.96;
  67   2          OE = 0;
  68   2          b[0] = discode[addata % 10];
  69   2          b[1] = discode[addata / 10 % 10];
  70   2          b[2] = discode[addata /100 % 10];
  71   2      //    for(i = 0;i <= 20;i++ )
  72   2      //    {
  73   2            show();
  74   2      //  }
  75   2        }
  76   1      
  77   1      }
  78          
  79          


MODULE INFORMATION:   STATIC OVERLAYABLE
   CODE SIZE        =    169    ----
   CONSTANT SIZE    =     10    ----
   XDATA SIZE       =   ----    ----
   PDATA SIZE       =   ----    ----
   DATA SIZE        =     11    ----
   IDATA SIZE       =   ----    ----
   BIT SIZE         =   ----    ----
END OF MODULE INFORMATION.


C51 COMPILATION COMPLETE.  0 WARNING(S),  0 ERROR(S)
